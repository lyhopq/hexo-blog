<script src="//lib.sinaapp.com/js/jquery/1.8/jquery.min.js"></script>
<script src="<%- config.root %>js/scale.fix.js"></script>
<script src="<%- config.root %>js/jquery.imagesloaded.min.js"></script>
<script src="<%- config.root %>js/gallery.js"></script>

<% if (config.disqus_shortname){ %>
<script type="text/javascript">
  var disqus_shortname = '<%= config.disqus_shortname %>';

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/<% if (page.comments){ %>embed.js<% } else { %>count.js<% } %>';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>
<% } else if (theme.duoshuo_shortname){ %>
<script type="text/javascript">
var duoshuoQuery = {short_name:"<%= theme.duoshuo_shortname %>"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<% } %>
<% if (theme.gotop.enable || theme.duoshuo_shortname){ %>
<div id="rightfix" style="display:none;">
<% if (theme.duoshuo_shortname && page.comments){ %>
<a href="#comment" id="gocomm" class="fix_btn" title="提问/评论"><i><i></i></i></a>
<% } %>
<% if (theme.gotop.enable){ %>
<a href="javascript:void(0)" id="gotop" class="fix_btn" onclick="gotop();" title="回到顶部"><i></i></a>
<script>
  function gotop(){
    $('html,body').animate({
        scrollTop : '0px'
      }, <%= theme.gotop.speed %>);
  }
  $(function(){
    _rightfix = $('#rightfix');
    $(window).scroll(function(){
      $sollTop = document.documentElement.scrollTop + document.body.scrollTop;
      if($sollTop > <%= theme.gotop.soll_top %>){
        _rightfix.show();
      }else{
        _rightfix.hide();
      }
    });
  });
</script>
<% } %>
</div>
<% } %>
<% if (theme.fancybox){ %>
<link rel="stylesheet" href="<%- config.root %>fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="<%- config.root %>fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>
<% } %>

<% if (page.mathjax){ %>
<%- partial('mathjax') %>
<% } %>

<script>
var option = {
  engineKey: '70e393f447ec0686ffba'
};
(function(w,d,t,u,n,s,e){
  s = d.createElement(t);
  s.src = u;
  s.async = 1;
  w[n] = function(r){
    w[n].opts = r;
  };
  e = d.getElementsByTagName(t)[0];
  e.parentNode.insertBefore(s, e);
})(window,document,'script','//tinysou-cdn.b0.upaiyun.com/ts.js','_ts');
_ts(option);

$("#ts-search-input").mouseenter(function(){
  $("#ts-search-input").animate({width:'+=100px',opacity:'+=0.4'},"slow")}).stop().mouseleave(function(){
  $("#ts-search-input").animate({width:'-=100px',opacity:'-=0.4'},"slow")});
</script>
